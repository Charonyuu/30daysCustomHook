{"version":3,"file":"index.modern.mjs","sources":["src/useLocalStorage.ts","src/useCounter.ts","src/useSessionStorage.ts","src/useFetch.ts","src/useFetchAPI.ts","src/useWindowSize.ts","src/useTimeout.ts","src/useDebounce.ts","src/useOutsideClick.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const readInitValue = useCallback(() => {\n    try {\n      const item = localStorage.getItem(key);\n      if (!item) {\n        return initialValue;\n      }\n      try {\n        // 嘗試把item變成JSON解析\n        return JSON.parse(item);\n      } catch (e) {\n        // 如果只是純字串則回傳\n        return item;\n      }\n    } catch (err) {\n      console.error(\"Error reading from localStorage:\", err);\n      return initialValue;\n    }\n  }, [key, initialValue]);\n  const [storeState, setStoreState] = useState(readInitValue());\n  function setLocalStorage(value: T | ((prev: T) => T)) {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storeState) : value;\n      setStoreState(valueToStore);\n      // const valueToString = JSON.stringify(valueToStore);\n      // localStorage.setItem(key, valueToString);\n      localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.log(\"Set LocalStorage Error\", error);\n    }\n  }\n  useEffect(() => {\n    setLocalStorage(readInitValue());\n  }, []);\n  return [storeState, setLocalStorage] as const;\n}\n","import React, { useState } from \"react\";\n\nexport function useCounter(initialValue?: number) {\n  const [count, setCount] = useState(initialValue || 0);\n\n  // Increase 1\n  function increment() {\n    setCount((prevCount: number) => prevCount + 1);\n  }\n\n  // decrease 1\n  function decrement() {\n    setCount((prevCount: number) => prevCount - 1);\n  }\n\n  // reset to initValue or 0\n  function reset() {\n    setCount(initialValue || 0);\n  }\n\n  return { count, setCount, increment, decrement, reset };\n}\n","import { useState, useEffect, useCallback } from \"react\";\n\nexport function useSessionStorage<T>(key: string, initialValue: T) {\n  const readInitValue = useCallback(() => {\n    try {\n      const item = sessionStorage.getItem(key);\n      if (!item) {\n        return initialValue;\n      }\n      try {\n        // 嘗試把item變成JSON解析\n        return JSON.parse(item);\n      } catch (e) {\n        // 如果只是純字串則回傳\n        return item;\n      }\n    } catch (err) {\n      console.error(\"Error reading from sessionStorage:\", err);\n      return initialValue;\n    }\n  }, [key, initialValue]);\n  const [storeState, setStoreState] = useState<T>();\n  function setSessionStorage(value: T | ((prev: T) => T)) {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storeState) : value;\n      setStoreState(valueToStore);\n      const valueToString = JSON.stringify(valueToStore);\n      sessionStorage.setItem(key, valueToString);\n      sessionStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.log(\"Set sessionStorage Error\", error);\n    }\n  }\n  useEffect(() => {\n    setSessionStorage(readInitValue());\n  }, []);\n  return [storeState, setSessionStorage] as const;\n}\n","import axios, { Method, AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\n\ntype UseFetchProps = {\n  method?: Method;\n  options?: AxiosRequestConfig;\n};\n\nexport function useFetch<T>(\n  url: string,\n  { method, options }: UseFetchProps = { method: \"GET\" }\n) {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string>(\"\");\n\n  async function fetchApi() {\n    try {\n      setLoading(true);\n      const res = await axios({ method, url, ...options });\n      setData(res.data);\n      setLoading(false);\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    fetchApi();\n  }, [url]);\n\n  return { data, loading, error };\n}\n","import axios, { AxiosRequestConfig, Method } from \"axios\";\nimport { useEffect, useState, useRef } from \"react\";\n\n// 用來儲存緩存的數據\nconst cache: Record<string, any> = {};\n\ntype UseFetchProps = {\n  method?: Method;\n  headers?: Record<string, string>;\n  options?: AxiosRequestConfig;\n};\n\ntype UseFetchState<T> = {\n  data: T | null;\n  loading: boolean;\n  error: {\n    message: string;\n    code?: number;\n  } | null;\n};\n\nexport function useFetchAPI<T>(\n  url: string,\n  { method, headers, options }: UseFetchProps = { method: \"GET\" }\n): UseFetchState<T> {\n  const cacheKey = useRef(`${method}-${url}-${JSON.stringify(options)}`);\n  const [state, setState] = useState<UseFetchState<T>>({\n    data: null,\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    // 檢查緩存\n    if (cache[cacheKey.current]) {\n      setState({\n        data: cache[cacheKey.current],\n        loading: false,\n        error: null,\n      });\n      return;\n    }\n\n    // 發出新請求\n    const fetchData = async () => {\n      try {\n        const res = await axios({\n          method,\n          url,\n          headers,\n          signal: controller.signal,\n          ...options,\n        });\n\n        // 更新緩存\n        cache[cacheKey.current] = res.data;\n\n        setState({\n          data: res.data,\n          loading: false,\n          error: null,\n        });\n      } catch (error) {\n        setState({\n          data: null,\n          loading: false,\n          error: {\n            message: error.message,\n            code: error.response?.status,\n          },\n        });\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      controller.abort();\n    };\n  }, [url, method, headers, options]);\n\n  return state;\n}\n","import { useState, useEffect } from \"react\";\n\nexport function useWindowSize() {\n  const isClient = typeof window === \"object\";\n\n  const [width, setWidth] = useState<number>(isClient ? window.innerWidth : 0);\n  const [height, setHeight] = useState<number>(\n    isClient ? window.innerHeight : 0\n  );\n\n  useEffect(() => {\n    if (!isClient) return;\n    const handleResize = () => {\n      setWidth(window.innerWidth);\n      setHeight(window.innerHeight);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [isClient]);\n\n  return { height, width };\n}\n","import { useEffect, useRef } from \"react\";\n\n// Custom Hook\nexport function useTimeout(callback: () => void, delay: number | null) {\n  const savedCallback = useRef<() => void>();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function fn() {\n      if (savedCallback.current) {\n        savedCallback.current();\n      }\n    }\n    if (delay !== null) {\n      const id = setTimeout(fn, delay);\n      return () => clearTimeout(id);\n    }\n  }, [delay]);\n}\n\n","import { useRef, useCallback, useEffect } from \"react\";\n\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number\n) {\n  const timerIdRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const debouncedCallback = useCallback(\n    (...args: Parameters<T>) => {\n      if (timerIdRef.current !== null) {\n        clearTimeout(timerIdRef.current);\n      }\n\n      timerIdRef.current = setTimeout(() => {\n        callback(...args);\n      }, delay);\n    },\n    [callback, delay]\n  );\n  useEffect(() => {\n    return () => {\n      if (timerIdRef.current !== null) {\n        clearTimeout(timerIdRef.current);\n      }\n    };\n  }, []);\n  return debouncedCallback;\n}\n","import React, { useEffect, useRef } from \"react\";\n\nexport const useOutsideClick = <T extends HTMLElement>(\n  callback: () => void\n) => {\n  const ref = useRef<T | null>(null);\n\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        callback();\n      }\n    };\n\n    document.addEventListener(\"click\", handleClick);\n\n    return () => {\n      document.removeEventListener(\"click\", handleClick);\n    };\n  }, [callback]); // updated dependency array to include callback instead of ref\n\n  return ref;\n};\n"],"names":["useLocalStorage","key","initialValue","readInitValue","useCallback","item","localStorage","getItem","JSON","parse","e","err","console","error","storeState","setStoreState","useState","setLocalStorage","value","valueToStore","Function","setItem","stringify","log","useEffect","useCounter","count","setCount","increment","prevCount","decrement","reset","useSessionStorage","sessionStorage","setSessionStorage","valueToString","useFetch","url","method","options","data","setData","loading","setLoading","setError","async","res","axios","_extends","message","fetchApi","cache","useFetchAPI","headers","cacheKey","useRef","state","setState","controller","AbortController","current","signal","_error$response","code","response","status","fetchData","abort","useWindowSize","isClient","window","width","setWidth","innerWidth","height","setHeight","innerHeight","handleResize","addEventListener","removeEventListener","useTimeout","callback","delay","savedCallback","id","setTimeout","clearTimeout","useDebouncedCallback","timerIdRef","debouncedCallback","args","useOutsideClick","ref","handleClick","event","contains","target","document"],"mappings":"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"}