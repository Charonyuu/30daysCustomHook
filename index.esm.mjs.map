{"version":3,"file":"index.esm.mjs","sources":["src/useLocalStorage.ts","src/useCounter.ts","src/useSessionStorage.ts","src/useFetch.ts","src/useFetchAPI.ts","src/useWindowSize.ts","src/useTimeout.ts","src/useDebounce.ts","src/useOutsideClick.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const readInitValue = useCallback(() => {\n    try {\n      const item = localStorage.getItem(key);\n      if (!item) {\n        return initialValue;\n      }\n      try {\n        // 嘗試把item變成JSON解析\n        return JSON.parse(item);\n      } catch (e) {\n        // 如果只是純字串則回傳\n        return item;\n      }\n    } catch (err) {\n      console.error(\"Error reading from localStorage:\", err);\n      return initialValue;\n    }\n  }, [key, initialValue]);\n  const [storeState, setStoreState] = useState(readInitValue());\n  function setLocalStorage(value: T | ((prev: T) => T)) {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storeState) : value;\n      setStoreState(valueToStore);\n      // const valueToString = JSON.stringify(valueToStore);\n      // localStorage.setItem(key, valueToString);\n      localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.log(\"Set LocalStorage Error\", error);\n    }\n  }\n  useEffect(() => {\n    setLocalStorage(readInitValue());\n  }, []);\n  return [storeState, setLocalStorage] as const;\n}\n","import React, { useState } from \"react\";\n\nexport function useCounter(initialValue?: number) {\n  const [count, setCount] = useState(initialValue || 0);\n\n  // Increase 1\n  function increment() {\n    setCount((prevCount: number) => prevCount + 1);\n  }\n\n  // decrease 1\n  function decrement() {\n    setCount((prevCount: number) => prevCount - 1);\n  }\n\n  // reset to initValue or 0\n  function reset() {\n    setCount(initialValue || 0);\n  }\n\n  return { count, setCount, increment, decrement, reset };\n}\n","import { useState, useEffect, useCallback } from \"react\";\n\nexport function useSessionStorage<T>(key: string, initialValue: T) {\n  const readInitValue = useCallback(() => {\n    try {\n      const item = sessionStorage.getItem(key);\n      if (!item) {\n        return initialValue;\n      }\n      try {\n        // 嘗試把item變成JSON解析\n        return JSON.parse(item);\n      } catch (e) {\n        // 如果只是純字串則回傳\n        return item;\n      }\n    } catch (err) {\n      console.error(\"Error reading from sessionStorage:\", err);\n      return initialValue;\n    }\n  }, [key, initialValue]);\n  const [storeState, setStoreState] = useState<T>();\n  function setSessionStorage(value: T | ((prev: T) => T)) {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storeState) : value;\n      setStoreState(valueToStore);\n      const valueToString = JSON.stringify(valueToStore);\n      sessionStorage.setItem(key, valueToString);\n      sessionStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.log(\"Set sessionStorage Error\", error);\n    }\n  }\n  useEffect(() => {\n    setSessionStorage(readInitValue());\n  }, []);\n  return [storeState, setSessionStorage] as const;\n}\n","import axios, { Method, AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\n\ntype UseFetchProps = {\n  method?: Method;\n  options?: AxiosRequestConfig;\n};\n\nexport function useFetch<T>(\n  url: string,\n  { method, options }: UseFetchProps = { method: \"GET\" }\n) {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string>(\"\");\n\n  async function fetchApi() {\n    try {\n      setLoading(true);\n      const res = await axios({ method, url, ...options });\n      setData(res.data);\n      setLoading(false);\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    fetchApi();\n  }, [url]);\n\n  return { data, loading, error };\n}\n","import axios, { AxiosRequestConfig, Method } from \"axios\";\nimport { useEffect, useState, useRef } from \"react\";\n\n// 用來儲存緩存的數據\nconst cache: Record<string, any> = {};\n\ntype UseFetchProps = {\n  method?: Method;\n  headers?: Record<string, string>;\n  options?: AxiosRequestConfig;\n};\n\ntype UseFetchState<T> = {\n  data: T | null;\n  loading: boolean;\n  error: {\n    message: string;\n    code?: number;\n  } | null;\n};\n\nexport function useFetchAPI<T>(\n  url: string,\n  { method, headers, options }: UseFetchProps = { method: \"GET\" }\n): UseFetchState<T> {\n  const cacheKey = useRef(`${method}-${url}-${JSON.stringify(options)}`);\n  const [state, setState] = useState<UseFetchState<T>>({\n    data: null,\n    loading: true,\n    error: null,\n  });\n\n  useEffect(() => {\n    const controller = new AbortController();\n\n    // 檢查緩存\n    if (cache[cacheKey.current]) {\n      setState({\n        data: cache[cacheKey.current],\n        loading: false,\n        error: null,\n      });\n      return;\n    }\n\n    // 發出新請求\n    const fetchData = async () => {\n      try {\n        const res = await axios({\n          method,\n          url,\n          headers,\n          signal: controller.signal,\n          ...options,\n        });\n\n        // 更新緩存\n        cache[cacheKey.current] = res.data;\n\n        setState({\n          data: res.data,\n          loading: false,\n          error: null,\n        });\n      } catch (error) {\n        setState({\n          data: null,\n          loading: false,\n          error: {\n            message: error.message,\n            code: error.response?.status,\n          },\n        });\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      controller.abort();\n    };\n  }, [url, method, headers, options]);\n\n  return state;\n}\n","import { useState, useEffect } from \"react\";\n\nexport function useWindowSize() {\n  const isClient = typeof window === \"object\";\n\n  const [width, setWidth] = useState<number>(isClient ? window.innerWidth : 0);\n  const [height, setHeight] = useState<number>(\n    isClient ? window.innerHeight : 0\n  );\n\n  useEffect(() => {\n    if (!isClient) return;\n    const handleResize = () => {\n      setWidth(window.innerWidth);\n      setHeight(window.innerHeight);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [isClient]);\n\n  return { height, width };\n}\n","import { useEffect, useRef } from \"react\";\n\n// Custom Hook\nexport function useTimeout(callback: () => void, delay: number | null) {\n  const savedCallback = useRef<() => void>();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    function fn() {\n      if (savedCallback.current) {\n        savedCallback.current();\n      }\n    }\n    if (delay !== null) {\n      const id = setTimeout(fn, delay);\n      return () => clearTimeout(id);\n    }\n  }, [delay]);\n}\n\n","import { useRef, useCallback, useEffect } from \"react\";\n\nexport function useDebouncedCallback<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number\n) {\n  const timerIdRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const debouncedCallback = useCallback(\n    (...args: Parameters<T>) => {\n      if (timerIdRef.current !== null) {\n        clearTimeout(timerIdRef.current);\n      }\n\n      timerIdRef.current = setTimeout(() => {\n        callback(...args);\n      }, delay);\n    },\n    [callback, delay]\n  );\n  useEffect(() => {\n    return () => {\n      if (timerIdRef.current !== null) {\n        clearTimeout(timerIdRef.current);\n      }\n    };\n  }, []);\n  return debouncedCallback;\n}\n","import React, { useEffect, useRef } from \"react\";\n\nexport const useOutsideClick = <T extends HTMLElement>(\n  callback: () => void\n) => {\n  const ref = useRef<T | null>(null);\n\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        callback();\n      }\n    };\n\n    document.addEventListener(\"click\", handleClick);\n\n    return () => {\n      document.removeEventListener(\"click\", handleClick);\n    };\n  }, [callback]); // updated dependency array to include callback instead of ref\n\n  return ref;\n};\n"],"names":["useLocalStorage","key","initialValue","readInitValue","useCallback","item","localStorage","getItem","JSON","parse","e","err","console","error","_useState","useState","storeState","setStoreState","setLocalStorage","value","valueToStore","Function","setItem","stringify","log","useEffect","useCounter","setCount","count","increment","prevCount","decrement","reset","useSessionStorage","sessionStorage","setSessionStorage","valueToString","useFetch","url","_temp","_ref","method","options","data","setData","_useState2","loading","setLoading","_useState3","setError","_temp2","Promise","resolve","axios","_extends","then","res","_catch","message","reject","fetchApi","cache","useFetchAPI","headers","cacheKey","useRef","state","setState","controller","AbortController","current","signal","_error$response","code","response","status","fetchData","abort","useWindowSize","isClient","window","innerWidth","width","setWidth","innerHeight","height","setHeight","handleResize","addEventListener","removeEventListener","useTimeout","callback","delay","savedCallback","id","setTimeout","clearTimeout","useDebouncedCallback","timerIdRef","debouncedCallback","_arguments","arguments","apply","slice","call","useOutsideClick","ref","handleClick","event","contains","target","document"],"mappings":"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"}