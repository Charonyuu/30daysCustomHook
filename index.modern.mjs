import{useCallback as t,useState as n,useEffect as r,useRef as e}from"react";import o from"axios";function c(e,o){const c=t(()=>{try{const t=localStorage.getItem(e);if(!t)return o;try{return JSON.parse(t)}catch(n){return t}}catch(t){return console.error("Error reading from localStorage:",t),o}},[e,o]),[i,s]=n(c());function a(t){try{const n=t instanceof Function?t(i):t;s(n),localStorage.setItem(e,JSON.stringify(n))}catch(t){console.log("Set LocalStorage Error",t)}}return r(()=>{a(c())},[]),[i,a]}function i(t){const[r,e]=n(t||0);return{count:r,setCount:e,increment:function(){e(t=>t+1)},decrement:function(){e(t=>t-1)},reset:function(){e(t||0)}}}function s(e,o){const c=t(()=>{try{const t=sessionStorage.getItem(e);if(!t)return o;try{return JSON.parse(t)}catch(n){return t}}catch(t){return console.error("Error reading from sessionStorage:",t),o}},[e,o]),[i,s]=n();function a(t){try{const n=t instanceof Function?t(i):t;s(n);const r=JSON.stringify(n);sessionStorage.setItem(e,r),sessionStorage.setItem(e,JSON.stringify(n))}catch(t){console.log("Set sessionStorage Error",t)}}return r(()=>{a(c())},[]),[i,a]}function a(){return a=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},a.apply(this,arguments)}function u(t,{method:e,options:c}={method:"GET"}){const[i,s]=n(null),[u,l]=n(!0),[d,g]=n("");return r(()=>{!async function(){try{l(!0);const n=await o(a({method:e,url:t},c));s(n.data),l(!1)}catch(t){console.error(t),g(t.message),l(!1)}}()},[t]),{data:i,loading:u,error:d}}const l={};function d(t,{method:c,headers:i,options:s}={method:"GET"}){const u=e(`${c}-${t}-${JSON.stringify(s)}`),[d,g]=n({data:null,loading:!0,error:null});return r(()=>{const n=new AbortController;if(!l[u.current])return(async()=>{try{const r=await o(a({method:c,url:t,headers:i,signal:n.signal},s));l[u.current]=r.data,g({data:r.data,loading:!1,error:null})}catch(t){var r;g({data:null,loading:!1,error:{message:t.message,code:null==(r=t.response)?void 0:r.status}})}})(),()=>{n.abort()};g({data:l[u.current],loading:!1,error:null})},[t,c,i,s]),d}function g(){const t="object"==typeof window,[e,o]=n(t?window.innerWidth:0),[c,i]=n(t?window.innerHeight:0);return r(()=>{if(!t)return;const n=()=>{o(window.innerWidth),i(window.innerHeight)};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[t]),{height:c,width:e}}function f(t,n){const o=e();r(()=>{o.current=t},[t]),r(()=>{if(null!==n){const t=setTimeout(function(){o.current&&o.current()},n);return()=>clearTimeout(t)}},[n])}function m(n,o){const c=e(null),i=t((...t)=>{null!==c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{n(...t)},o)},[n,o]);return r(()=>()=>{null!==c.current&&clearTimeout(c.current)},[]),i}const h=t=>{const n=e(null);return r(()=>{const r=r=>{n.current&&!n.current.contains(r.target)&&t()};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[t]),n};export{i as useCounter,m as useDebouncedCallback,u as useFetch,d as useFetchAPI,c as useLocalStorage,h as useOutsideClick,s as useSessionStorage,f as useTimeout,g as useWindowSize};
//# sourceMappingURL=index.modern.mjs.map
